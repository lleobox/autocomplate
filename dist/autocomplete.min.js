"use strict";!function(t){var e=function(e,n){if(e=e||""){var a=this;a.match_str=n,e.each(function(e,n){t(n).parent("div.autocomplete-box")[0]||(t(n).wrap(t('<div class="autocomplete-box"></div>')).after(t('<ul class="suggest-list" tabindex="0"></ul>')),a.bind_input(n),a.bind_ul(t(n).next()))})}};e.prototype={bind_input:function(e){var n=this,a=t(e);a.keydown(function(t){t=t||window.event;var e=t.keyCode?t.keyCode:t.which;"13"==e&&t.preventDefault(),"40"==e&&a.next().children().first().focus()}),a.keyup(function(t){t=t||window.event;var e,c=(t.keyCode?t.keyCode:t.which,a.val());e=n.makeArr(c),n.source(c,e,n.showItem)})},bind_ul:function(e){var n=e.prev();e.on("click",function(a){a=a||window.event;var c=a.target||a.srcElement;n.val(t(c).text()),e.fadeOut(0)}).on("keydown",function(a){a=a||window.event;var c=a.target||a.srcElement,i=a.keyCode||a.which;switch(i){case 13:a.preventDefault(),n.val(t(c).text()).focus(),e.fadeOut(0);break;case 38:t(c).prev()[0]?t(c).prev().focus():(a.preventDefault(),n.val(n.val()).focus());break;case 40:t(c).next().focus()}})},source:function(t,e,n){var a,c;return t.length>0?(a=new RegExp(t,"i"),c=e.map(function(t){return a.test(t)?t:null}).filter(function(t){return!!t}),n.call(this,c)):n.call(this,null)},makeArr:function(e){var n,a=this;return a.match_str instanceof Array?a.match_str:(t.ajax({url:self.match_str+"data.json",type:"get",data:e,async:!1,dataType:"json",success:function(t){n=t.data}}),n)},showItem:function(e){var n=t(".suggest-list");e&&0!=e.length?(n.empty().css({display:"block"}),e.forEach(function(e){var a=t('<li tabindex="-1"></li>').text(e);n.append(a)})):n.empty().css({display:"none"})}},t.fn.autocomplete=function(t){new e(this,t);return this}}(jQuery);